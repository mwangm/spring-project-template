jacocoTestCoverageVerification {
    afterEvaluate {
        classDirectories = files(classDirectories.files.collect {
            fileTree(dir: it, exclude: [
                   '**Application*', '**/exception/**', '**/jpa/**'
            ])
        })
    }
//    violationRules {
//        rule {
//            limit {
//                minimum = 0.90
//            }
//        }
//    }
}

jacocoTestReport {
    reports {
        xml.enabled false
        csv.enabled false
        html.destination file("${buildDir}/reports/coverage")
    }
}

jacocoTestCoverageVerification.dependsOn jacocoTestReport
check.dependsOn jacocoTestCoverageVerification